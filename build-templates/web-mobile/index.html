<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Stone Line</title>
    <!--http://www.html5rocks.com/en/mobile/mobifying/-->
    <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1" />


    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <!-- force webkit on 360 -->
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <!-- force edge on IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="msapplication-tap-highlight" content="no">

    <meta name="full-screen" content="yes" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="360-fullscreen" content="true" />

    <!-- force screen orientation on some browser -->
    <meta name="screen-orientation" content="portrait" />
    <meta name="x5-orientation" content="portrait">

    <!--fix fireball/issues/3568 -->
    <!--<meta name="browsermode" content="application">-->
    <meta name="x5-page-mode" content="app">

    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <link rel="stylesheet" type="text/css" href="style-mobile.css" />
    <link rel="icon" href="favicon.ico" />

    <link rel="stylesheet" href="css/ymtAD.css">

    <script type="text/javascript" src="./js/h5splash.js"></script>
    <script src="./js/cc-resolution.js" charset="utf-8"></script>

    <script src="https://sdk.minigame.vip/js/1.1/minigame.js"></script>

    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        html {
            touch-action: none
        }

        body {
            overflow: hidden;
            /* 页面背景颜色 */
            background: #99e0f3;
        }

        #Game {
            border: none;
            border: 0;
            position: absolute;
            margin: 0;
            overflow: hidden;
            width: 720px;
            height: 1280px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            outline: none;
        }
    </style>
</head>

<body>
    <div id="Game">
        <canvas id="GameCanvas" style="border: none; outline: none;" width="720" height="1280"></canvas>
        <div id="splash" style="display: none;">
            <div class="progress-bar stripes">
                <span style="width: 0%"></span>
            </div>
        </div>
    </div>
    <script src="src/settings.js" charset="utf-8"></script>
    <script src="main.js" charset="utf-8"></script>
    <script src="ccc2-all-patches.js" charset="utf-8"></script>

    <script type="text/javascript">
        (function () {
            window["MiniGameSDK"] = {};
            var gameName = "Stone Line"
            // resolution.init(720, 1280);
            // console.timeEnd = console.time = console.error = console.log = console.info = console.warn = function () { };
            h5splash.init({ appName: gameName, channel: "yomitoo" });
            h5splash.setGameLogoScale(0.8);
            //设置背景颜色
            h5splash.setBackgroundColor("#99e0f3");
            function isMobile() {
                return /Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            }
            if (isMobile()) {
                const divB = document.getElementById("GameCanvas");
                const divA = document.getElementById("Game");

                if (divB && divA && divA.parentNode) {
                    divA.parentNode.insertBefore(divB, divA.nextSibling);
                }
            } else {
                resolution.init(720, 1280);
            }
            // open web debugger console
            if (typeof VConsole !== 'undefined') {
                window.vConsole = new VConsole();
            }
            var debug = window._CCSettings.debug;
            var splash = document.getElementById('splash');
            splash.style.display = 'block';

            function loadScript(moduleName, cb) {
                function scriptLoaded() {
                    document.body.removeChild(domScript);
                    domScript.removeEventListener('load', scriptLoaded, false);
                    cb && cb();
                };
                var domScript = document.createElement('script');
                domScript.async = true;
                domScript.src = moduleName;
                domScript.addEventListener('load', scriptLoaded, false);
                document.body.appendChild(domScript);
            }

            loadScript(debug ? 'cocos2d-js.js' : 'cocos2d-js-min.js', function () {
                if (CC_PHYSICS_BUILTIN || CC_PHYSICS_CANNON) {
                    loadScript(debug ? 'physics.js' : 'physics-min.js', window.boot);
                }
                else {
                    // console.error("start minigame init", minigame)
                    minigame.initializeAsync()
                        .then(function () {
                            // console.error("minigame.initializeAsync")
                            window.focusFlag = false;
                            window.boot();
                        });
                }

            });
        })();
    </script>
</body>

</html>