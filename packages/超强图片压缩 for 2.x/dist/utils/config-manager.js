const Fs=require("fs"),Path=require("path"),configFileDir="local",configFileName="imager2x.json",ConfigManager={defaultConfig:{isAutoStart:!1,inputDir:"",cacheDir:"",imageType:"png,jpg",imageMin:.01,imageMax:10,excludeFiles:""},set(e){var i=Editor.Project.path||Editor.projectPath,t=Path.join(i,configFileDir),t=(Fs.existsSync(t)||Fs.mkdirSync(t),Path.join(i,configFileDir,configFileName));let r=Object.create(null);Fs.existsSync(t)&&(r=JSON.parse(Fs.readFileSync(t,"utf8")));for(const a in e){let i=e[a];Array.isArray(i)&&(i=i.filter(i=>""!==i)),r[a]=i}return Fs.writeFileSync(t,JSON.stringify(r,null,2)),t},get(){var i=Editor.Project.path||Editor.projectPath,e=Path.join(i,configFileDir,configFileName);let t=null;return Fs.existsSync(e)?t=JSON.parse(Fs.readFileSync(e,"utf8")):((t={...this.defaultConfig}).inputDir=Path.join(i,"build","wechatgame"),t.cacheDir=Path.join(i,"build","imageCache")),t}};module.exports=ConfigManager;